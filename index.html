<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interaktivn√≠ kv√≠zov√° hra</title>
  <style>
    :root {
      --bg-body: #f5f5f5;
      --bg-container: #fff;
      --color-text: #000;
      --option-bg: #fff;
      --option-border: #000;
      --option-hover: #f0f0f0;
      --btn-bg: transparent;
      --btn-border: #2196f3;
      --btn-color: #2196f3;
      --progress-bg: #ddd;
      --progress-completed: #2196f3;
    }
    body {
      font-family: Arial, sans-serif;
      background: var(--bg-body);
      color: var(--color-text);
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      transition: background 0.3s, color 0.3s;
    }
    #game-container {
      position: relative;
      background: var(--bg-container);
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 500px;
      max-width: 95%;
      padding: 80px 20px 20px;
      text-align: center;
      overflow: hidden;
      transition: background 0.3s;
    }
    #feedback {
      position: absolute;
      top: 10px;
      left: 0;
      right: 0;
      font-size: 2.5rem;
      font-weight: bold;
      color: #00aa00;
      display: none;
    }
    /* P≈ôesun n√°pisu Ot√°zka x/‚Ä¶ a ovl√°dac√≠ch prvk≈Ø doprost≈ôed */
    #q-controls {
      position: absolute;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    #q-number {
      font-weight: bold;
    }
    #jump-input {
      width: 50px;
      padding: 2px;
      font-size: 1rem;
      text-align: center;
    }
    #jump-btn,
    #shuffle-btn,
    #prev-btn,
    #next-btn {
      padding: 5px 8px;
      font-size: 0.9rem;
      cursor: pointer;
      border: 1px solid var(--btn-border);
      border-radius: 4px;
      background: var(--btn-bg);
      color: var(--btn-color);
      transition: background 0.3s, color 0.3s, border-color 0.3s;
    }
    #question {
      font-size: 1.3rem;
      margin: 50px 0 25px;
      font-weight: bold;
    }
    #options {
      display: block;
    }
    .option {
      background: var(--option-bg);
      border: 2px solid var(--option-border);
      padding: 15px;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s, border-color 0.3s, color 0.3s;
      text-align: left;
      font-size: 1.1rem;
      margin: 10px 0;
      position: relative;
      color: var(--color-text);
    }
    .option:hover {
      background: var(--option-hover);
    }
    .correct {
      background: #00ff00 !important;
      color: #000;
      border-color: #00aa00 !important;
      animation: glow 0.8s ease-in-out;
    }
    .wrong {
      background: #ff0000 !important;
      border-color: #cc0000 !important;
      color: #000;
      animation: shake 0.4s ease-in-out;
    }
    /* Animace pro ≈°patnou odpovƒõƒè (ot≈ôes) */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-8px); }
      40%, 80% { transform: translateX(8px); }
    }
    /* Animace pro spr√°vnou odpovƒõƒè (b√≠l√© rozz√°≈ôen√≠ okraje) */
    @keyframes glow {
      0% { box-shadow: 0 0 5px white; }
      50% { box-shadow: 0 0 20px white; }
      100% { box-shadow: 0 0 5px white; }
    }

    #progress-container {
      display: flex;
      gap: 2px;
      margin-top: 15px;
      height: 10px;
    }
    #progress-container .segment {
      flex: 1;
      background: var(--progress-bg);
      border-radius: 2px;
      transition: background 0.3s;
    }
    #progress-container .segment.completed {
      background: var(--progress-completed);
    }

    #controls {
      margin-top: 20px;
    }
    /* Tlaƒç√≠tko p≈ôep√≠naƒçe t√©matu */
    #theme-toggle {
      position: absolute;
      top: 10px;
      right: 10px;
      border: 1px solid var(--btn-border);
      background: var(--btn-bg);
      color: var(--btn-color);
      font-size: 1.2rem;
      padding: 5px 8px;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s, color 0.3s, border-color 0.3s;
    }

    /* DARK MODE STYLY */
    body.dark-mode {
      --bg-body: #121212;
      --bg-container: #1e1e1e;
      --color-text: #fff;
      --option-bg: #2c2c2c;
      --option-border: #fff;
      --option-hover: #3a3a3a;
      --btn-bg: transparent;
      --btn-border: #fff;
      --btn-color: #fff;
      --progress-bg: #555;
      --progress-completed: #90caf9;
    }
    body.dark-mode #feedback {
      color: #a5d6a7;
    }
    body.dark-mode .correct {
      background: #4caf50 !important;
      color: #fff;
      border-color: #388e3c !important;
    }
    body.dark-mode .wrong {
      background: #e57373 !important;
      border-color: #d32f2f !important;
      color: #fff;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <button id="theme-toggle">üåô</button>
    <div id="feedback"></div>
    <div id="q-controls">
      <div id="q-number"></div>
      <input id="jump-input" type="number" min="1" />
      <button id="jump-btn">P≈ôej√≠t</button>
      <button id="shuffle-btn">Proh√°zet ot√°zky</button>
    </div>
    <div id="question"></div>
    <div id="options"></div>
    <div id="progress-container"></div>
    <div id="controls">
      <button id="prev-btn">Zpƒõt</button>
      <button id="next-btn">Dal≈°√≠</button>
    </div>
  </div>

  <script>
    const STORAGE_KEY = 'quizDataOrder';
    const originalData = [
      { question: "Kdo je autorem zn√°m√©ho cit√°tu \"Inflace je v≈ædy a v≈°ude mƒõnov√Ω jev\"?", options: ["M. Friedman", "J. M. Keynes", "A. Smith", "K. Marx"], answerText: "M. Friedman" },
      { question: "Jak√Ω je c√≠l restriktivn√≠ mƒõnov√© politiky?", options: ["Zv√Ω≈°it ve≈ôejn√© v√Ωdaje", "Zv√Ω≈°it export", "Omezit inflaci a p≈ôeh≈ô√°t√≠ ekonomiky", "Sn√≠≈æit nezamƒõstnanost"], answerText: "Omezit inflaci a p≈ôeh≈ô√°t√≠ ekonomiky" },
      { question: "Kolik ƒçin√≠ ekonomicky aktivn√≠ obyvatelstvo (pracovn√≠ s√≠la)?", options: ["7 100 tis.", "6 800 tis.", "7 500 tis.", "7 300 tis. (zamƒõstnanci + samostatnƒõ v√Ωdƒõleƒçn√≠ + nezamƒõstnan√≠)"], answerText: "7 300 tis. (zamƒõstnanci + samostatnƒõ v√Ωdƒõleƒçn√≠ + nezamƒõstnan√≠)" },
      { question: "Kdy obvykle doch√°z√≠ ke zv√Ω≈°en√≠ nezamƒõstnanosti?", options: ["P≈ôi r≈Østu HDP", "Ve f√°zi expanze", "Ve f√°zi recese", "P≈ôi r≈Østu investic"], answerText: "Ve f√°zi recese" },
      { question: "Jak√° je velikost penƒõ≈æn√≠ z√°soby vyj√°d≈ôen√° agreg√°tem M2?", options: ["1440 mld.", "14C2 mld. (vklady √∫ƒçt. + vklady term. + obƒõ≈æivo)", "920 mld.", "1480 mld."], answerText: "14C2 mld. (vklady √∫ƒçt. + vklady term. + obƒõ≈æivo)" },
      { question: "Co je hlavn√≠m smyslem v√Ωpoƒçtu HDP?", options: ["Mƒõ≈ôen√≠ ekonomick√©ho v√Ωkonu zemƒõ", "Sledov√°n√≠ m√≠ry inflace", "Zji≈°tƒõn√≠ d≈Øchodov√© nerovnosti", "Stanoven√≠ v√Ω≈°e DPH"], answerText: "Mƒõ≈ôen√≠ ekonomick√©ho v√Ωkonu zemƒõ" },
      { question: "Mezi makroekonomick√© c√≠le nepat≈ô√≠:", options: ["Cenov√° stabilita", "Zv√Ω≈°en√≠ zisku jednoho podniku", "Rovnov√°ha v platebn√≠ bilanci", "Ekonomick√Ω r≈Øst"], answerText: "Zv√Ω≈°en√≠ zisku jednoho podniku" },
      { question: "Jak se rozdƒõluj√≠ ve≈ôejn√© rozpoƒçty podle √∫rovnƒõ ≈ô√≠zen√≠?", options: ["St√°tn√≠, krajsk√© a obecn√≠", "Investiƒçn√≠ a neinvestiƒçn√≠", "Strukturovan√© a nestrukturovan√©", "Da≈àov√© a neda≈àov√©"], answerText: "St√°tn√≠, krajsk√© a obecn√≠" },
      { question: "Kter√° situace nast√°v√° p≈ôi poklesu autonomn√≠ch v√Ωdaj≈Ø?", options: ["Multiplik√°tor se zvy≈°uje", "Potenci√°ln√≠ produkt roste", "Rovnov√°≈æn√Ω v√Ωstup kles√°", "Zvy≈°uje se AD"], answerText: "Rovnov√°≈æn√Ω v√Ωstup kles√°" },
      { question: "Co je \"centr√°ln√≠ banka\"?", options: ["Instituce, kter√° ≈ô√≠d√≠ mƒõnovou politiku st√°tu", "Banka, kter√° poskytuje hypot√©ky", "St√°tn√≠ rozpoƒçtov√° organizace", "Obchodn√≠ banka s nejvƒõt≈°√≠m ziskem"], answerText: "Instituce, kter√° ≈ô√≠d√≠ mƒõnovou politiku st√°tu" },
      { question: "Co z n√°sleduj√≠c√≠ho nen√≠ souƒç√°st√≠ makroekonomick√© anal√Ωzy?", options: ["HDP", "Inflace", "Nezamƒõstnanost", "Mar≈æe konkr√©tn√≠ firmy"], answerText: "Mar≈æe konkr√©tn√≠ firmy" },
      { question: "Kter√Ω cenov√Ω index se nejƒçastƒõji pou≈æ√≠v√° k mƒõ≈ôen√≠ inflace?", options: ["Index pr≈Ømyslov√© produkce", "Index spot≈ôebitelsk√Ωch cen (CPI)", "Defl√°tor exportu", "Index ≈æivotn√≠ √∫rovnƒõ"], answerText: "Index spot≈ôebitelsk√Ωch cen (CPI)" },
      { question: "Jak se naz√Ωv√° situace, kdy p≈ô√≠jmy st√°tu p≈ôevy≈°uj√≠ v√Ωdaje?", options: ["Fisk√°ln√≠ deficit", "Monet√°rn√≠ rovnov√°ha", "Rozpoƒçtov√° rovnov√°ha", "Rozpoƒçtov√Ω p≈ôebytek"], answerText: "Rozpoƒçtov√Ω p≈ôebytek" },
      { question: "Kter√Ω faktor m≈Ø≈æe ovlivnit frekvenci a hloubku hospod√°≈ôsk√Ωch cykl≈Ø?", options: ["Poƒçet obyvatel", "Efektivita hospod√°≈ôsk√© politiky", "√örovnƒõ mzdy", "Zahraniƒçn√≠ obchod"], answerText: "Efektivita hospod√°≈ôsk√© politiky" },
      { question: "K ƒçemu slou≈æ√≠ st√°tn√≠ rozpoƒçet?", options: ["K evidenci devizov√Ωch operac√≠", "K financov√°n√≠ ƒçinnost√≠ st√°tu a plnƒõn√≠ jeho funkc√≠", "K evidenci obchodn√≠ch transakc√≠", "K mƒõ≈ôen√≠ inflace"], answerText: "K financov√°n√≠ ƒçinnost√≠ st√°tu a plnƒõn√≠ jeho funkc√≠" },
      { question: "Jak√Ω je ƒçist√Ω dom√°c√≠ produkt (ƒåDP)?", options: ["650", "824", "1034", "1091"], answerText: "1034" },
      { question: "Co je hlavn√≠m c√≠lem mƒõnov√© politiky?", options: ["Zv√Ω≈°it export", "Zaji≈°tƒõn√≠ cenov√© stability", "Sn√≠≈æen√≠ vl√°dn√≠ch v√Ωdaj≈Ø", "Zv√Ω≈°en√≠ dan√≠"], answerText: "Zaji≈°tƒõn√≠ cenov√© stability" },
      { question: "Jak√© riziko vznik√° p≈ôi p≈ô√≠li≈° rychl√© tvorbƒõ penƒõz komerƒçn√≠mi bankami?", options: ["Sn√≠≈æen√≠ zamƒõstnanosti", "R≈Øst inflace", "Deflace", "R≈Øst √∫spor"], answerText: "R≈Øst inflace" },
      { question: "Jak√° je hlavn√≠ p≈ô√≠ƒçina frikƒçn√≠ nezamƒõstnanosti?", options: ["Struktur√°ln√≠ zmƒõny v ekonomice", "Pokles agreg√°tn√≠ popt√°vky", "Dobrovoln√° zmƒõna zamƒõstn√°n√≠ nebo vstup na trh pr√°ce", "Z√°nik pr≈Ømyslov√Ωch z√≥n"], answerText: "Dobrovoln√° zmƒõna zamƒõstn√°n√≠ nebo vstup na trh pr√°ce" },
      { question: "Kter√Ω z n√°sleduj√≠c√≠ch je hlavn√≠ ukazatel inflace v ƒåR?", options: ["Index cen v√Ωrobc≈Ø", "Index spot≈ôebitelsk√Ωch cen (CPI)", "HDP defl√°tor", "Index pr≈Ømyslu"], answerText: "Index spot≈ôebitelsk√Ωch cen (CPI)" },
      { question: "Jak vypad√° funkce agreg√°tn√≠ch v√Ωdaj≈Ø (AD)?", options: ["AD = 786 + 0,79Y", "AD = 1285 + 0,73Y", "AD = 1305 + 0,79Y", "AD = 499 + 0,79Y"], answerText: "AD = 1285 + 0,73Y" },
      { question: "Pokud doch√°z√≠ k poklesu investic, v√Ωsledkem je:", options: ["N√°rust SAS", "R≈Øst AD", "R≈Øst exportu", "Pokles AD a rovnov√°≈æn√©ho v√Ωstupu"], answerText: "Pokles AD a rovnov√°≈æn√©ho v√Ωstupu" },
      { question: "Kdy nast√°v√° pln√° zamƒõstnanost?", options: ["Kdy≈æ je m√≠ra nezamƒõstnanosti pod 1 %", "Kdy≈æ nezamƒõstnanost odpov√≠d√° p≈ôirozen√© m√≠≈ôe", "Kdy≈æ v≈°ichni maj√≠ pr√°ci", "Kdy≈æ st√°t garantuje pr√°ci"], answerText: "Kdy≈æ nezamƒõstnanost odpov√≠d√° p≈ôirozen√© m√≠≈ôe" },
      { question: "Kter√Ω faktor NEvede k posunu AD?", options: ["Zmƒõna d≈Øvƒõry spot≈ôebitel≈Ø", "Zmƒõna exportu", "Zmƒõna investic", "Zmƒõna cenov√© hladiny"], answerText: "Zmƒõna cenov√© hladiny" },
      { question: "Co zp≈Øsob√≠ stagflaci v modelu AS-AD?", options: ["P√°d cen", "R≈Øst exportu", "Monet√°rn√≠ expanze", "Negativn√≠ nab√≠dkov√Ω ≈°ok"], answerText: "Negativn√≠ nab√≠dkov√Ω ≈°ok" },
      { question: "Co m≈Ø≈æe b√Ωt d≈Øsledkem cla na dovoz zbo≈æ√≠?", options: ["R≈Øst exportu", "Zv√Ω≈°en√≠ ceny dovozov√©ho zbo≈æ√≠", "Sn√≠≈æen√≠ inflace", "Pokles cen pro spot≈ôebitele"], answerText: "Zv√Ω≈°en√≠ ceny dovozov√©ho zbo≈æ√≠" },
      { question: "Co m≈Ø≈æe b√Ωt d≈Øsledkem p≈ô√≠li≈° restriktivn√≠ fisk√°ln√≠ politiky?", options: ["Zv√Ω≈°en√≠ inflace", "R≈Øst nezamƒõstnanosti", "Pokles HDP", "R≈Øst soukrom√© spot≈ôeby"], answerText: "R≈Øst nezamƒõstnanosti" },
      { question: "Kter√Ω c√≠l nepat≈ô√≠ mezi stabilizaƒçn√≠ funkce st√°tu?", options: ["Cenov√° stabilita", "R≈Øst HDP", "Zv√Ω≈°en√≠ nerovnosti", "Vysok√° zamƒõstnanost"], answerText: "Zv√Ω≈°en√≠ nerovnosti" },
      { question: "Kter√Ω z tƒõchto typ≈Ø nezamƒõstnanosti je zp≈Øsoben pohybem pracovn√≠k≈Ø mezi zamƒõstn√°n√≠mi?", options: ["Frikƒçn√≠", "Struktur√°ln√≠", "Cyklick√°", "Skryt√°"], answerText: "Frikƒçn√≠" },
      { question: "Jak√Ω dopad m√° zv√Ω≈°en√≠ dan√≠ na agreg√°tn√≠ popt√°vku?", options: ["Popt√°vka se zvy≈°uje", "Popt√°vka roste jen u export√©r≈Ø", "Nem√° ≈æ√°dn√Ω vliv", "Popt√°vka se sni≈æuje"], answerText: "Popt√°vka se sni≈æuje" }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function generateQuizData() {
      const data = originalData.map(item => {
        const opts = [...item.options];
        shuffle(opts);
        return {
          question: item.question,
          options: opts,
          answer: opts.indexOf(item.answerText)
        };
      });
      shuffle(data);
      return data;
    }

    let quizData;
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      try {
        quizData = JSON.parse(saved);
      } catch {
        quizData = generateQuizData();
        localStorage.setItem(STORAGE_KEY, JSON.stringify(quizData));
      }
    } else {
      quizData = generateQuizData();
      localStorage.setItem(STORAGE_KEY, JSON.stringify(quizData));
    }

    const total = quizData.length;
    let currentIndex = 0;
    const userAnswers = new Array(total).fill(null);

    const feedbackEl = document.getElementById('feedback');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const qNumberEl = document.getElementById('q-number');
    const jumpInput = document.getElementById('jump-input');
    const jumpBtn = document.getElementById('jump-btn');
    const shuffleBtn = document.getElementById('shuffle-btn');
    const progressContainer = document.getElementById('progress-container');
    const themeToggle = document.getElementById('theme-toggle');

    // Inicializace progress baru
    function initProgressBar() {
      for (let i = 0; i < total; i++) {
        const seg = document.createElement('div');
        seg.classList.add('segment');
        seg.dataset.index = i;
        progressContainer.appendChild(seg);
      }
    }

    // Aktualizace progress baru podle userAnswers[]
    function updateProgressBar() {
      Array.from(progressContainer.children).forEach((seg, idx) => {
        if (userAnswers[idx] !== null) {
          seg.classList.add('completed');
        } else {
          seg.classList.remove('completed');
        }
      });
    }

    jumpInput.setAttribute('max', total);

    function loadQuestion() {
      feedbackEl.style.display = 'none';
      clearState();
      updateProgressBar();

      const q = quizData[currentIndex];
      qNumberEl.textContent = `Ot√°zka ${currentIndex + 1}/${total}`;
      questionEl.textContent = `${currentIndex + 1}. ${q.question}`;

      q.options.forEach((opt, idx) => {
        const btn = document.createElement('div');
        btn.classList.add('option');
        btn.textContent = `${String.fromCharCode(97 + idx)}) ${opt}`;
        btn.addEventListener('click', () => selectOption(btn, idx));
        optionsEl.appendChild(btn);
      });

      prevBtn.style.display = currentIndex > 0 ? 'inline-block' : 'none';
      const prevAns = userAnswers[currentIndex];
      if (prevAns !== null) {
        revealAnswer(prevAns);
      }
    }

    function clearState() {
      nextBtn.style.display = 'none';
      while (optionsEl.firstChild) {
        optionsEl.removeChild(optionsEl.firstChild);
      }
    }

    function selectOption(btn, idx) {
      userAnswers[currentIndex] = idx;
      revealAnswer(idx, btn);
      updateProgressBar();
    }

    function revealAnswer(selectedIdx, clickedBtn = null) {
      const correctIdx = quizData[currentIndex].answer;
      Array.from(optionsEl.children).forEach((optEl, idx) => {
        optEl.style.pointerEvents = 'none';
        if (idx === correctIdx) {
          optEl.classList.add('correct');
        }
        if (idx === selectedIdx && selectedIdx !== correctIdx) {
          optEl.classList.add('wrong');
        }
      });
      if (selectedIdx === correctIdx) {
        feedbackEl.textContent = 'SPR√ÅVNƒö';
        feedbackEl.style.color = '#00aa00';
      } else {
        feedbackEl.textContent = '≈†PATNƒö';
        feedbackEl.style.color = '#cc0000';
      }
      feedbackEl.style.display = 'block';
      nextBtn.style.display = 'inline-block';
    }

    prevBtn.addEventListener('click', () => {
      if (currentIndex > 0) {
        currentIndex--;
        loadQuestion();
      }
    });

    nextBtn.addEventListener('click', () => {
      if (currentIndex < total - 1) {
        currentIndex++;
        loadQuestion();
      } else {
        feedbackEl.style.display = 'none';
        questionEl.textContent = 'Kv√≠z dokonƒçen!';
        qNumberEl.textContent = '';
        clearState();
        prevBtn.style.display = 'none';
        nextBtn.style.display = 'none';
      }
    });

    jumpBtn.addEventListener('click', () => {
      const val = parseInt(jumpInput.value, 10);
      if (!isNaN(val) && val >= 1 && val <= total) {
        currentIndex = val - 1;
        loadQuestion();
        jumpInput.value = '';
      }
    });

    shuffleBtn.addEventListener('click', () => {
      localStorage.removeItem(STORAGE_KEY);
      location.reload();
    });

    // P≈ôepnut√≠ t√©matu
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      if (document.body.classList.contains('dark-mode')) {
        themeToggle.textContent = '‚òÄÔ∏è';
      } else {
        themeToggle.textContent = 'üåô';
      }
    });

    // Inicializace
    initProgressBar();
    loadQuestion();
  </script>
</body>
</html>
